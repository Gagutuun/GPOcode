<!DOCTYPE html>
<html>
<head>
    <title>PdfViewer</title>
    <!-- загрузка библиотеки pdf.js -->
    <script src="https://mozilla.github.io/pdf.js/build/pdf.js"></script>
</head>
<body>
  <form>
    <input type="file" id="pdf-file-input" accept="application/pdf">
    <button type="submit">Load PDF</button>
  </form>
  <div>
    <!-- контейнер для отображения PDF-файла -->
    <canvas id="pdf-canvas"></canvas>
  </div>
  <button id="previous-page">Previous</button>
  <button id="next-page">Next</button>
  <script>
    const canvas = document.getElementById('pdf-canvas');
    const prev = document.getElementById('previous-page');
    const next = document.getElementById('next-page');
    const fileInput = document.getElementById('pdf-file-input');

    let pdfDoc = null,
        pageNum = 1,
        pageRendering = false,
        pageNumPending = null;

    function renderPage(num) {
      pageRendering = true;
      pdfDoc.getPage(num).then(function(page) {
        const viewport = page.getViewport({scale:1.5});
        canvas.height = viewport.height;
        canvas.width = viewport.width;
        const renderCtx = canvas.getContext('2d');
        const renderTask = page.render({canvasContext: renderCtx, viewport: viewport});
        renderTask.promise.then(function() {
          pageRendering = false;
          if (pageNumPending !== null) {
            renderPage(pageNumPending);
            pageNumPending = null;
          }
        });
      });
      document.getElementById('page-num').textContent = num;
    }

    function queueRenderPage(num) {
      if (pageRendering) {
        pageNumPending = num;
      } else {
        renderPage(num);
      }
    }

    prev.addEventListener('click', function() {
      if (pageNum <= 1) {
        return;
      }
      pageNum--;
      queueRenderPage(pageNum);
    });

    next.addEventListener('click', function() {
      if (pageNum >= pdfDoc.numPages) {
        return;
      }
      pageNum++;
      queueRenderPage(pageNum);
    });

    // загрузка PDF-файла и отображение его на странице
    fileInput.addEventListener('input', function() {
      const file = fileInput.files[0];
      const fileURL = URL.createObjectURL(file);
      pdfjsLib.getDocument(fileURL).then(function(pdfDoc_) {
        pdfDoc = pdfDoc_;
        renderPage(pageNum);
      });
    });
  </script>
</body>
</html>
